{% extends "layout.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='overview.css') }}">

<div class="overviewSlider">
    <h1 class="overviewHeader">{{ dismissal.name }}</h1>

    <div class="slider">
        <div class="slides">
            <div class="slide">
              <div class="field-container">
                {% if '<iframe' in dismissal.media %}
                  {{ dismissal.media | safe }}
                {% else %}
                  <img src="{{ url_for('static', filename=dismissal.media) }}" alt="{{ dismissal.name }}">
                {% endif %}
              </div>

                <div class="description">
                    <p>{{ dismissal.description }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Button -->
    <div class="nav-buttons">
        {% if dismissal.id > 1 %}
        <a href="{{ url_for('dismissal_page', id=dismissal.id - 1) }}">
            <button>← Previous</button>
        </a>
        {% else %}
        <span></span>
        {% endif %}

        {% if dismissal.id < 10 %}
        <a href="{{ url_for('dismissal_page', id=dismissal.id + 1) }}">
            <button>Next →</button>
        </a>
        {% else %}
        <a href="{{ url_for('quiz') }}">
            <button>Take Quiz →</button>
        </a>
        {% endif %}
    </div>
</div>

<script>
  function setCookie(name, value, days = 365) {
    const expires = new Date(Date.now() + days * 864e5).toUTCString();
    document.cookie = `${encodeURIComponent(name)}=${encodeURIComponent(value)}; expires=${expires}; path=/`;
  }

  window.addEventListener('DOMContentLoaded', () => {
    const dismissalName = "{{ dismissal.name }}";
    setCookie(dismissalName, true);
  });
</script>
{% endblock %}
